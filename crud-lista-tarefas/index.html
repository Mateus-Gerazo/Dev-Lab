<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <p>Adicione sua tarefa</p>
    <input id="entrada" type="text" value="teste">
    <button onclick="salvarDados()">Salvar</button>

    <br>
    <p>Tarefas a fazer</p>
    <div id="editar"></div>

    <div>
        <ul id="resultados"></ul>
    </div>

    <script>
        let listaDeTarefas = [];
        let index = 0;


        function salvarDados() {
            let entrada = document.getElementById("entrada").value;
            let entradaObj = {
                id: index,
                texto: entrada
            }
            listaDeTarefas.push(entradaObj);
            index++;
            //CRUD
            mostrar();
        };

        function mostrar() {
            let ul = document.getElementById("resultados");
            let html = "";
            listaDeTarefas.forEach(elemento => {
                console.log(elemento);
                html += `<li onclick="editar(${elemento.id})">
                    ${elemento.texto}  
                    <button onclick="editar(${elemento.id})">
                        Editar
                        </button>
                    <button onclick="deletar(${elemento.id})">
                        Deletar
                        </button>
                    </li>`;
            });

            ul.innerHTML = html;
        };

        function editar(id) {
            let resultado = listaDeTarefas.find(obj => obj.id == id);
            let html = `<input type="text" id="textoParaEditar" value="${resultado.texto}">
                        <button onclick="editarDados(${id})">Salvar</button>`;
            let divEditar = document.getElementById("editar");
            divEditar.innerHTML = html;
        }

        function editarDados(id) {
            let textoParaEditar = document.getElementById("textoParaEditar").value;
            let resultado = listaDeTarefas.find(obj => obj.id == id);
            resultado.texto = textoParaEditar;
            mostrar();
            let divEditar = document.getElementById("editar");
            divEditar.innerHTML = "";
        }

        function deletar(id) {
            let novalista = listaDeTarefas.filter(obj => obj.id !== id);
            listaDeTarefas = novalista;
            mostrar();
        }
    </script>
</body>

</html>